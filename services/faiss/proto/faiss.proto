syntax = "proto3";

package faiss;

service FaissService {
  rpc RetrieveTopK(RetrieveTopKRequest) returns (RetrieveTopKResponse) {}
  rpc LoadEmbedding(stream LoadEmbeddingRequest) returns (LoadEmbeddingResponse) {}
}

message RetrieveTopKRequest {
  repeated int32 embedding = 1;
  uint32 top_k = 2;
}

message RetrieveTopKResponse {
  string model_version = 1;
  repeated bytes indexes = 2;
}

message LoadEmbeddingRequest {
  repeated int32 embedding = 1;
  uint32 image_id = 2;
  uint32 dim = 3;
}

message LoadEmbeddingResponse {

}
